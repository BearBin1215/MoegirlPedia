{"version":3,"file":"SectionPermanentLink.min.js","sources":["webpack://bearbin-moegirlpedia/./src/gadgets/SectionPermanentLink/index.ts","webpack://bearbin-moegirlpedia/webpack/runtime/rspack_version","webpack://bearbin-moegirlpedia/webpack/runtime/rspack_unique_id"],"sourcesContent":["/**\n * @description 在各种讨论页的标题后方添加按钮，复制本章节的带锚点固定连接\n */\n\nif (mw.config.get('wgNamespaceNumber') % 2 === 1) {\n  const buttunText = wgULS('固定链接', '固定連結');\n  $('#mw-content-text .mw-parser-output h2').each((_, ele) => {\n    const $ele = $(ele) as JQuery<HTMLHeadingElement>;\n    const $divider = $('<span class=\"mw-editsection-divider\"> | </span>') as JQuery<HTMLSpanElement>; // 分隔符\n    const $permanentLink = $(`<a>${buttunText}</a>`) as JQuery<HTMLAnchorElement>; // 复制按钮\n    if (document.getElementsByClassName('mw-editsection')[0]) {\n      // 有编辑按钮时将元素添加到现有的编辑按钮边上\n      $(ele)\n        .find('.mw-editsection-bracket')\n        .first()\n        .after($divider)\n        .after($permanentLink);\n      const $marButton = $ele.find('.AnnTools_MarkAsResolved');\n      // 使按钮顺序位于MAR之后\n      if ($marButton[0]) {\n        const $marDivider = $marButton.next('.mw-editsection-divider');\n        if ($marDivider.length > 0) {\n          $marDivider.after($divider).after($permanentLink);\n        }\n      }\n    } else {\n      // 没有编辑按钮时新增一个\n      $ele\n        .find('.mw-headline')\n        .after($('<span class=\"mw-editsection\"/>').append(\n          '<span class=\"mw-editsection-bracket\">[</span>',\n          $permanentLink,\n          '<span class=\"mw-editsection-bracket\">]</span>',\n        ));\n    }\n    $permanentLink.on('click', () => {\n      navigator.clipboard.writeText(`[[Special:PermanentLink/${mw.config.get('wgRevisionId')}#${$ele.find('.mw-headline').attr('id')}]]`);\n      $permanentLink.text(wgULS('复制成功', '復製成功'));\n      setTimeout(() => {\n        $permanentLink.text(buttunText);\n      }, 2000);\n    });\n  });\n}\n","__webpack_require__.rv = () => (\"1.4.2\")","__webpack_require__.ruid = \"bundler=rspack@1.4.2\";\n"],"names":["mw","buttunText","wgULS","$","_","ele","$ele","$divider","$permanentLink","document","$marButton","$marDivider","navigator","setTimeout"],"mappings":"yIAIA,GCJA,EAAoB,EAAE,CAAG,IAAO,QCAhC,EAAoB,IAAI,CAAG,uBFIvBA,GAAG,MAAM,CAAC,GAAG,CAAC,qBAAuB,GAAM,EAAG,CAChD,IAAMC,EAAaC,MAAM,OAAQ,QACjCC,EAAE,yCAAyC,IAAI,CAAC,CAACC,EAAGC,KAClD,IAAMC,EAAOH,EAAEE,GACTE,EAAWJ,EAAE,mDACbK,EAAiBL,EAAE,CAAC,GAAG,EAAEF,EAAW,IAAI,CAAC,EAC/C,GAAIQ,SAAS,sBAAsB,CAAC,iBAAiB,CAAC,EAAE,CAAE,CAExDN,EAAEE,GACC,IAAI,CAAC,2BACL,KAAK,GACL,KAAK,CAACE,GACN,KAAK,CAACC,GACT,IAAME,EAAaJ,EAAK,IAAI,CAAC,4BAE7B,GAAII,CAAU,CAAC,EAAE,CAAE,CACjB,IAAMC,EAAcD,EAAW,IAAI,CAAC,0BAChCC,CAAAA,EAAY,MAAM,CAAG,GACvBA,EAAY,KAAK,CAACJ,GAAU,KAAK,CAACC,EAEtC,CACF,MAEEF,EACG,IAAI,CAAC,gBACL,KAAK,CAACH,EAAE,kCAAkC,MAAM,CAC/C,gDACAK,EACA,kDAGNA,EAAe,EAAE,CAAC,QAAS,KACzBI,UAAU,SAAS,CAAC,SAAS,CAAC,CAAC,wBAAwB,EAAEZ,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,EAAEM,EAAK,IAAI,CAAC,gBAAgB,IAAI,CAAC,MAAM,EAAE,CAAC,EAClIE,EAAe,IAAI,CAACN,MAAM,OAAQ,SAClCW,WAAW,KACTL,EAAe,IAAI,CAACP,EACtB,EAAG,IACL,EACF,EACF,C"}