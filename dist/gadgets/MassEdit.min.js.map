{"version":3,"file":"MassEdit.min.js","sources":["webpack://bearbin-moegirlpedia/./src/components/Loger/index.less","webpack://bearbin-moegirlpedia/./src/gadgets/MassEdit/index.less","webpack://bearbin-moegirlpedia/./node_modules/.pnpm/css-loader@6.11.0_@rspack+core@1.4.11_webpack@5.101.0/node_modules/css-loader/dist/runtime/api.js","webpack://bearbin-moegirlpedia/./node_modules/.pnpm/css-loader@6.11.0_@rspack+core@1.4.11_webpack@5.101.0/node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://bearbin-moegirlpedia/./node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://bearbin-moegirlpedia/./node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://bearbin-moegirlpedia/./node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://bearbin-moegirlpedia/./node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://bearbin-moegirlpedia/./node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://bearbin-moegirlpedia/./node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://bearbin-moegirlpedia/webpack/runtime/compat_get_default_export","webpack://bearbin-moegirlpedia/webpack/runtime/define_property_getters","webpack://bearbin-moegirlpedia/webpack/runtime/has_own_property","webpack://bearbin-moegirlpedia/webpack/runtime/nonce","webpack://bearbin-moegirlpedia/webpack/runtime/rspack_version","webpack://bearbin-moegirlpedia/webpack/runtime/rspack_unique_id","webpack://bearbin-moegirlpedia/./src/utils/dom.ts","webpack://bearbin-moegirlpedia/./src/components/Loger/index.less?efc9","webpack://bearbin-moegirlpedia/./src/components/Loger/index.ts","webpack://bearbin-moegirlpedia/./src/utils/api/categoryMembers.ts","webpack://bearbin-moegirlpedia/./src/utils/api/pageSource.ts","webpack://bearbin-moegirlpedia/./src/utils/api/compare.ts","webpack://bearbin-moegirlpedia/./src/utils/string.ts","webpack://bearbin-moegirlpedia/./src/gadgets/MassEdit/index.less?73be","webpack://bearbin-moegirlpedia/./src/gadgets/MassEdit/index.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@6.11.0_@rspack+core@1.4.11_webpack@5.101.0/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@6.11.0_@rspack+core@1.4.11_webpack@5.101.0/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.bearbintools-loger .loger-clear{margin-left:.3em;font-size:.9em;font-weight:400}.bearbintools-loger .loger-body{background:#ffffffb3;border:1px solid #ccc;padding:.3em;display:flow-root}.bearbintools-loger .loger-filter{float:right;padding:.4em}.bearbintools-loger .loger-filter>div{cursor:pointer;border-radius:.3em;margin-bottom:.2em;padding-right:.2em}.bearbintools-loger .loger-filter>div.loger-filter-selected{background-color:#7f7f7f12}.bearbintools-loger .loger-filter .loger-filter-icon{text-align:center;width:1.2em;height:1em;line-height:1em;display:inline-block}.bearbintools-loger .loger-lines{max-height:20em;font-family:monospace;list-style:inside;overflow-y:auto}.bearbintools-loger .loger-lines>li a{color:inherit;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Loger/index.less\"],\"names\":[],\"mappings\":\"AADA,iCAAA,gBAAA,CAAA,cAAA,CAAA,eAAA,CAKA,gCAAA,oBAAA,CAAA,qBAAA,CAAA,YAAA,CAAA,iBAAA,CAMA,kCAAA,WAAA,CAAA,YAAA,CAIA,sCAAA,cAAA,CAAA,kBAAA,CAAA,kBAAA,CAAA,kBAAA,CAMA,4DAAA,0BAAA,CAGA,qDAAA,iBAAA,CAAA,WAAA,CAAA,UAAA,CAAA,eAAA,CAAA,oBAAA,CAOA,iCAAA,eAAA,CAAA,qBAAA,CAAA,iBAAA,CAAA,eAAA,CAMA,sCAAA,aAAA,CAAA,wCAAA,CAAA,gCAAA\",\"sourcesContent\":[\".bearbintools-loger .loger-clear {\\n  margin-left: 0.3em;\\n  font-size: 0.9em;\\n  font-weight: normal;\\n}\\n.bearbintools-loger .loger-body {\\n  display: flow-root;\\n  padding: 0.3em;\\n  border: 1px solid #ccc;\\n  background: rgba(255, 255, 255, 0.7);\\n}\\n.bearbintools-loger .loger-filter {\\n  float: right;\\n  padding: 0.4em;\\n}\\n.bearbintools-loger .loger-filter > div {\\n  border-radius: 0.3em;\\n  margin-bottom: 0.2em;\\n  padding-right: 0.2em;\\n  cursor: pointer;\\n}\\n.bearbintools-loger .loger-filter > div.loger-filter-selected {\\n  background-color: rgba(127, 127, 127, 0.07);\\n}\\n.bearbintools-loger .loger-filter .loger-filter-icon {\\n  display: inline-block;\\n  width: 1.2em;\\n  height: 1em;\\n  line-height: 1em;\\n  text-align: center;\\n}\\n.bearbintools-loger .loger-lines {\\n  max-height: 20em;\\n  overflow-y: auto;\\n  list-style: inside;\\n  font-family: monospace;\\n}\\n.bearbintools-loger .loger-lines > li a {\\n  color: inherit;\\n  text-decoration: underline dotted;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@6.11.0_@rspack+core@1.4.11_webpack@5.101.0/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@6.11.0_@rspack+core@1.4.11_webpack@5.101.0/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.rootpage-Special_MassEdit #firstHeading{flex-wrap:wrap;justify-content:space-between;align-items:flex-end;display:flex}.rootpage-Special_MassEdit #firstHeading>div{font-size:.6em}.rootpage-Special_MassEdit #bodyContent{padding-right:0!important}.rootpage-Special_MassEdit #bodyContent #mw-content-text h5{margin-bottom:0}.rootpage-Special_MassEdit #bodyContent #mw-content-text textarea{line-height:1.3}.rootpage-Special_MassEdit #bodyContent #mw-content-text>ul{margin:0 0 0 .2em!important;list-style:inside!important}.me-textarea{box-sizing:border-box;width:100%}#me-regex{justify-content:space-between;align-items:center;margin-top:.3rem;display:flex}#me-regex-note li{margin-top:0;margin-bottom:0}#me-page-lists{gap:.3em;display:flex}#me-page-lists>div{flex-grow:1}#me-page-lists>div textarea{resize:none}#me-pages-note{margin-bottom:.6em}.me-panel{gap:.1rem;display:flex}.me-panel+.me-panel{margin-top:.4em}#me-edit-panel #me-interval{flex:0 0 5.5em}#me-edit-panel #me-summary,#me-preview-panel .oo-ui-textInputWidget{max-width:initial}#me-retry{margin-top:.3em}#me-retry #me-use-retry{display:inline}#me-retry #me-use-retry .oo-ui-fieldLayout-body{max-width:unset;display:inline}#me-retry #me-use-retry .oo-ui-fieldLayout-body>span{display:inline}#me-retry #me-use-retry .oo-ui-checkboxInputWidget-checkIcon{top:0}#me-retry #me-use-retry:after{content:unset}#me-retry #me-retry-times{width:3em;display:inline-block}#me-regex-help-list{-webkit-user-select:none;user-select:none;list-style:inside}#me-regex-help-list li{margin-bottom:1px;line-height:1.6}#me-regex-help-list code{-webkit-user-select:all;user-select:all;cursor:text;border:1px solid #ddd;padding:1px 3px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/gadgets/MassEdit/index.less\"],\"names\":[],\"mappings\":\"AAEA,yCAAA,cAAA,CAAA,6BAAA,CAAA,oBAAA,CAAA,YAAA,CAMA,6CAAA,cAAA,CAGA,wCAAA,yBAAA,CAGA,4DAAA,eAAA,CAGA,kEAAA,eAAA,CAGA,4DAAA,2BAAA,CAAA,2BAAA,CAIA,aAAA,qBAAA,CAAA,UAAA,CAIA,UAAA,6BAAA,CAAA,kBAAA,CAAA,gBAAA,CAAA,YAAA,CAMA,kBAAA,YAAA,CAAA,eAAA,CAIA,eAAA,QAAA,CAAA,YAAA,CAIA,mBAAA,WAAA,CAGA,4BAAA,WAAA,CAGA,eAAA,kBAAA,CAGA,UAAA,SAAA,CAAA,YAAA,CAIA,oBAAA,eAAA,CAGA,4BAAA,cAAA,CAGA,oEAAA,iBAAA,CAMA,UAAA,eAAA,CAGA,wBAAA,cAAA,CAGA,gDAAA,eAAA,CAAA,cAAA,CAIA,qDAAA,cAAA,CAGA,6DAAA,KAAA,CAGA,8BAAA,aAAA,CAGA,0BAAA,SAAA,CAAA,oBAAA,CAIA,oBAAA,wBAAA,CAAA,gBAAA,CAAA,iBAAA,CAIA,uBAAA,iBAAA,CAAA,eAAA,CAIA,yBAAA,uBAAA,CAAA,eAAA,CAAA,WAAA,CAAA,qBAAA,CAAA,eAAA\",\"sourcesContent\":[\"/** flex基础，默认全居中 */\\n/** 覆盖渲染页面的样式 */\\n/** 文本溢出显示省略号 */\\n.rootpage-Special_MassEdit #firstHeading {\\n  display: flex;\\n  flex-wrap: wrap;\\n  justify-content: space-between;\\n  align-items: flex-end;\\n}\\n.rootpage-Special_MassEdit #firstHeading > div {\\n  font-size: 0.6em;\\n}\\n.rootpage-Special_MassEdit #bodyContent {\\n  padding-right: 0 !important;\\n}\\n.rootpage-Special_MassEdit #bodyContent #mw-content-text h5 {\\n  margin-bottom: 0;\\n}\\n.rootpage-Special_MassEdit #bodyContent #mw-content-text textarea {\\n  line-height: 1.3;\\n}\\n.rootpage-Special_MassEdit #bodyContent #mw-content-text > ul {\\n  list-style: inside !important;\\n  margin: 0 0 0 0.2em !important;\\n}\\n.me-textarea {\\n  box-sizing: border-box;\\n  width: 100%;\\n}\\n#me-regex {\\n  margin-top: 0.3rem;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n#me-regex-note li {\\n  margin-top: 0;\\n  margin-bottom: 0;\\n}\\n#me-page-lists {\\n  display: flex;\\n  gap: 0.3em;\\n}\\n#me-page-lists > div {\\n  flex-grow: 1;\\n}\\n#me-page-lists > div textarea {\\n  resize: none;\\n}\\n#me-pages-note {\\n  margin-bottom: 0.6em;\\n}\\n.me-panel {\\n  display: flex;\\n  gap: 0.1rem;\\n}\\n.me-panel + .me-panel {\\n  margin-top: 0.4em;\\n}\\n#me-edit-panel #me-interval {\\n  flex: 0 0 5.5em;\\n}\\n#me-edit-panel #me-summary {\\n  max-width: initial;\\n}\\n#me-preview-panel .oo-ui-textInputWidget {\\n  max-width: initial;\\n}\\n#me-retry {\\n  margin-top: 0.3em;\\n}\\n#me-retry #me-use-retry {\\n  display: inline;\\n}\\n#me-retry #me-use-retry .oo-ui-fieldLayout-body {\\n  display: inline;\\n  max-width: unset;\\n}\\n#me-retry #me-use-retry .oo-ui-fieldLayout-body > span {\\n  display: inline;\\n}\\n#me-retry #me-use-retry .oo-ui-checkboxInputWidget-checkIcon {\\n  top: 0;\\n}\\n#me-retry #me-use-retry::after {\\n  content: unset;\\n}\\n#me-retry #me-retry-times {\\n  display: inline-block;\\n  width: 3em;\\n}\\n#me-regex-help-list {\\n  list-style: inside;\\n  user-select: none;\\n}\\n#me-regex-help-list li {\\n  line-height: 1.6;\\n  margin-bottom: 1px;\\n}\\n#me-regex-help-list code {\\n  border: 1px solid #ddd;\\n  padding: 1px 3px;\\n  user-select: all;\\n  cursor: text;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","// getDefaultExport function for compatibility with non-ESM modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};\n","__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n            Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n        }\n    }\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nc = undefined;","__webpack_require__.rv = () => (\"1.4.11\")","__webpack_require__.ruid = \"bundler=rspack@1.4.11\";\n","/**\n * 根据html字符串创建节点\n * @param html HTML字符串\n * @returns 节点\n */\nconst createElement = (html: string) => {\n  const template = document.createElement('template');\n  template.innerHTML = html.trim();\n  return template.content.children[0] as HTMLElement;\n};\n\nexport default createElement;\n","\n      import API from \"!../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/.pnpm/css-loader@6.11.0_@rspack+core@1.4.11_webpack@5.101.0/node_modules/css-loader/dist/cjs.js!builtin:lightningcss-loader??clonedRuleSet-2.use[0]!../../../node_modules/.pnpm/less-loader@11.1.4_less@4.4.0_webpack@5.101.0/node_modules/less-loader/dist/cjs.js!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/.pnpm/css-loader@6.11.0_@rspack+core@1.4.11_webpack@5.101.0/node_modules/css-loader/dist/cjs.js!builtin:lightningcss-loader??clonedRuleSet-2.use[0]!../../../node_modules/.pnpm/less-loader@11.1.4_less@4.4.0_webpack@5.101.0/node_modules/less-loader/dist/cjs.js!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import createElement from '@/utils/dom';\nimport './index.less';\n\n/**\n * Loger对象的日志类型基础接口\n */\ninterface LogerProps {\n  /**\n   * 类型图标\n   */\n  icon: string | HTMLElement;\n\n  /**\n   * 类型颜色\n   */\n  color: string;\n\n  /**\n   * 类型文本\n   */\n  text: string;\n}\n\n/**\n * Loger对象的日志类型信息\n */\nexport interface LogerType extends LogerProps {\n  /**\n   * 日志类型名\n   */\n  name: string;\n}\n\nexport interface LogType extends LogerProps {\n  show?: boolean;\n}\n\ntype LogTypes = Record<string, LogType>;\n\n/**\n * 日志筛选按钮对象\n */\ninterface FilterButton {\n  button: HTMLElement,\n  countElement: HTMLElement,\n}\n\n/**\n * 日志行详情信息\n */\nexport interface LogDetail {\n  /**\n   * 日志行对应的HTML元素\n   */\n  element: HTMLElement,\n\n  /**\n   * 日志类型\n   */\n  type: string,\n}\n\nexport default class Loger {\n  private _logTypes: LogTypes = {\n    success: {\n      icon: '✓',\n      color: '#333',\n      text: '完成',\n    },\n    warn: {\n      icon: '!',\n      color: '#f28500',\n      text: '警告',\n    },\n    error: {\n      icon: '✕',\n      color: '#eb3941',\n      text: '出错',\n    },\n  };\n\n  /** Loger对象的HTML元素 */\n  element: HTMLDivElement;\n\n  /** 标题HTML元素 */\n  headline: HTMLElement;\n\n  /** 日志主体HTML元素 */\n  body = createElement('<div class=\"loger-body\"></div>') as HTMLDivElement;\n\n  /** 日志详情列表HTML元素 */\n  logerLines = createElement('<ul class=\"loger-lines\"></ul>') as HTMLUListElement;\n\n  /**\n   * 记录日志详情\n   * @type {Array<{node: HTMLAnchorElement, type: string}>}\n   */\n  logDetails: LogDetail[] = [];\n\n  /**\n   * 日志按钮\n   */\n  filterButtons: Record<string, FilterButton> = {};\n\n  /**\n   * 创建一个Loger对象\n   * @param logTypes 日志行类型及其属性\n   * @param id 元素id\n   * @param headlineTagName 标题元素标签名\n   */\n  constructor(logTypes: LogerType[] = [], id = '', headlineTagName = 'h3') {\n    if (logTypes.length > 0) {\n      // 根据输入生成需要的类型\n      this._logTypes = logTypes.reduce((pre, { name, icon, color, text }) => {\n        pre[name] = {\n          icon,\n          color,\n          text,\n        };\n        return pre;\n      }, {} as LogTypes);\n    }\n    for (const key in this._logTypes) {\n      // 默认显示\n      this._logTypes[key].show = true;\n    }\n\n    // 标题\n    this.headline = createElement(`<${headlineTagName} class=\"loger-headline\"></${headlineTagName}>`);\n\n    // 清空按钮\n    const clearButton = createElement('<a class=\"loger-clear\">[清空]</a>') as HTMLAnchorElement;\n    clearButton.addEventListener('click', this.clear.bind(this));\n\n    // 日志筛选区\n    const logerFilter = createElement('<nav class=\"loger-filter\"></nav>');\n\n    // 筛选按钮\n    for (const [type, { icon, color, text }] of Object.entries(this._logTypes)) {\n      const button = createElement(`<div class=\"loger-filter-selected loger-${type}\" style=\"color:${color}\"></div>`);\n\n      const iconElement = createElement('<span class=\"loger-filter-icon\"></span>');\n      iconElement.append(icon);\n\n      const countElement = createElement('<span class=\"loger-filter-count\">0</span>');\n\n      button.append(iconElement, countElement, ` ${text}`);\n\n      // 添加点击隐藏/显示日志行事件\n      button.addEventListener('click', () => {\n        if (this._logTypes[type].show) {\n          button.classList.remove('loger-filter-selected'); // 按钮添加对应类\n          this.logerLines.classList.add(`loger-${type}-hidden`); // 日志行元素添加隐藏类\n          this.logDetails.filter((detail) => detail.type === type).forEach((detail) => {\n            detail.element.style.display = 'none';\n          });\n          this._logTypes[type].show = false; // 设置显示状态为false\n        } else {\n          button.classList.add('loger-filter-selected');\n          this.logerLines.classList.remove(`loger-${type}-hidden`);\n          this.logDetails.filter((detail) => detail.type === type).forEach((detail) => {\n            detail.element.style.display = '';\n          });\n          this._logTypes[type].show = true;\n        }\n      });\n\n      this.filterButtons[type] = {\n        button,\n        countElement,\n      };\n\n      logerFilter.appendChild(button);\n    }\n\n    // 创建日志元素\n    this.element = createElement(`<div class=\"bearbintools-loger\" id=\"${id || ''}\"></div>`) as HTMLDivElement;\n\n    this.headline.append('日志', clearButton);\n    this.body.append(logerFilter, this.logerLines);\n    this.element.append(this.headline, this.body);\n  }\n\n  /**\n   * 添加一条日志\n   * @param text 文本\n   * @param type 日志，接受HTML形式的字符串\n   * @param time 时间\n   */\n  record(text: string, type = 'normal', time = new Date().toLocaleTimeString()) {\n    const record = document.createElement('li');\n    record.classList.add('loger-record', `loger-${type}`);\n    record.innerHTML = `${time} - ${text}`;\n    record.style.color = this._logTypes[type]?.color || '#222';\n\n    // 根据选择状态决定是否显示\n    if (this._logTypes[type]?.show === false) {\n      record.style.display = 'none';\n    }\n\n    this.logerLines.appendChild(record);\n    this.logerLines.scrollTop = this.logerLines.scrollHeight; // 日志滚动至底部\n    this.logDetails.push({\n      element: record,\n      type,\n    });\n    if (this.filterButtons[type]) {\n      this.filterButtons[type].countElement.innerText = String(+this.filterButtons[type].countElement.innerText + 1);\n    }\n    return record;\n  }\n\n  /** 清空日志 */\n  clear() {\n    this.logDetails.length = 0;\n    this.logerLines.innerHTML = '';\n    for (const key in this.filterButtons) {\n      this.filterButtons[key].countElement.innerText = '0';\n    }\n  }\n}\n","import type { Cmtype, ApiQueryResponse } from \"@/@types/api\";\n\n/**\n * 获取分类成员，有权限用户使用api，无权限用户使用ajax。\n *\n * @param cmtitle 分类名\n * @param cmtype 获取类型\n * @returns 页面列表\n */\nconst getCategoryMembers = async (cmtitle: string, cmtype: Cmtype[] = ['page', 'subcat', 'file']) => {\n  const api = new mw.Api();\n  const pageList: string[] = [];\n  // 有api权限的用户通过API获取，无权限用户通过ajax获取\n  if (mw.config.get('wgUserGroups')!.some((group) => ['bot', 'flood', 'patroller', 'sysop'].includes(group))) {\n    let cmcontinue: string | undefined = '';\n    while (cmcontinue !== undefined) {\n      const result = await api.post({\n        action: 'query',\n        format: 'json',\n        utf8: true,\n        list: 'categorymembers',\n        cmlimit: 'max',\n        cmtitle,\n        cmprop: 'title',\n        cmtype,\n        cmcontinue,\n      }) as ApiQueryResponse;\n      if (result.query.categorymembers[0]) {\n        pageList.push(...result.query.categorymembers.map(({ title }) => title));\n      }\n      cmcontinue = result.continue?.cmcontinue;\n    }\n  } else {\n    /**\n     * 对于未持有对应用户组的用户，通过ajax递归获取分类成员\n     * @param {string} link\n     */\n    const getCategoryMembersByAjax = async (link: string) => {\n      const $ajaxResult = $(await $.ajax(link));\n      const selector = cmtype.map((type) => {\n        switch (type) {\n          case 'page':\n            return '#mw-pages li a';\n          case 'subcat':\n            return '#mw-subcategories li a';\n          case 'file':\n            return '#mw-category-media li a.galleryfilename';\n        }\n      }).join(',');\n\n      // 将分类内的页面加入列表\n      const members = $ajaxResult.find(selector).map((_, ele) => {\n        if (ele.classList.contains('CategoryTreeLabel')) {\n          return `Category:${$(ele).text()}`;\n        } else if (ele.classList.contains('galleryfilename')) {\n          return `File:${$(ele).text()}`;\n        }\n        return $(ele).text();\n      }).get();\n      pageList.push(...members);\n\n      // 获取下一页分类内页面\n      if (cmtype.includes('page')) {\n        const $pageContinueLink = $ajaxResult.find('a[href*=\"&pagefrom=\"]');\n        if ($pageContinueLink.length) {\n          await getCategoryMembersByAjax($pageContinueLink.eq(0).attr('href')!);\n        }\n      }\n\n      // 获取下一页子分类\n      if (cmtype.includes('subcat')) {\n        const $catContinueLink = $ajaxResult.find('a[href*=\"&subcatfrom=\"]');\n        if ($catContinueLink.length) {\n          await getCategoryMembersByAjax($catContinueLink.eq(0).attr('href')!);\n        }\n      }\n\n      // 获取下一页分类文件\n      if (cmtype.includes('file')) {\n        const $catContinueLink = $ajaxResult.find('a[href*=\"&filefrom=\"]');\n        if ($catContinueLink.length) {\n          await getCategoryMembersByAjax($catContinueLink.eq(0).attr('href')!);\n        }\n      }\n    };\n\n    await getCategoryMembersByAjax(`/${cmtitle}?useskin=vector&safemode=1`);\n  }\n  return pageList;\n};\n\nexport const traverseCategoryMembers = async (cmtitle: string) => {\n  const traversedCategoryList: string[] = [];\n\n  const traverseCategory = async (category: string) => {\n    const api = new mw.Api();\n    const pageList: string[] = [];\n    let gcmcontinue: string | undefined = '';\n    while (gcmcontinue !== undefined) {\n      const response = await api.post({\n        action: 'query',\n        generator: 'categorymembers',\n        gcmtitle: category,\n        gcmtype: 'page|subcat',\n        gcmlimit: 'max',\n        gcmcontinue,\n      }) as ApiQueryResponse;\n      gcmcontinue = response.continue?.gcmcontinue;\n      for (const { ns, title } of Object.values(response.query.pages)) {\n        if (ns === 14 && !traversedCategoryList.includes(title)) {\n          traversedCategoryList.push(title); // 避免套娃\n          pageList.push(...await traverseCategory(title));\n        } else {\n          pageList.push(title);\n        }\n      }\n      console.log(`\\x1B[4m${category}\\x1B[0m下查找到\\x1B[4m${pageList.length}\\x1B[0m个页面`);\n    }\n    return [...new Set(pageList)];\n  };\n\n  return await traverseCategory(cmtitle);\n};\n\nexport default getCategoryMembers;\n","import type { ApiQueryResponse } from '@/@types/api';\r\n\r\n/**\r\n * 获取页面源代码\r\n * @param title 页面标题\r\n * @returns 页面源代码\r\n */\r\nconst pageSource = async (title: string, params?: Record<string, any>): Promise<string | undefined> => {\r\n  const api = new mw.Api();\r\n  const res = await api.post({\r\n    action: 'query',\r\n    prop: 'revisions',\r\n    titles: title,\r\n    rvprop: 'content',\r\n    ...params,\r\n  }) as ApiQueryResponse;\r\n  const [pageData] = Object.values(res.query.pages);\r\n  if ('revisions' in pageData) {\r\n    return pageData.revisions?.[0]['*'];\r\n  }\r\n  if ('missing' in pageData) {\r\n    throw ('missingtitle');\r\n  }\r\n};\r\n\r\nexport default pageSource;\r\n","import type { ApiCompareResponse } from '@/@types/api';\n\ntype $orString = JQuery<HTMLElement> | Element | string;\n\n/** 将比较结果生成为JQuery对象 */\nexport function formatDiff(\n  diffResult: string,\n  showTitle = false,\n  $otitleContent?: $orString | $orString[],\n  $ntitleContent?: $orString | $orString[],\n) {\n  const $otitle = $(`<td colspan=\"${diffResult ? 2 : 1}\" class=\"diff-otitle\" />`);\n  const $ntitle = $(`<td colspan=\"${diffResult ? 2 : 1}\" class=\"diff-ntitle\" />`);\n  if (Array.isArray($otitleContent)) {\n    $otitle.append(...$otitleContent);\n  } else {\n    $otitle.append($otitleContent || '旧版本');\n  }\n  if (Array.isArray($ntitleContent)) {\n    $ntitle.append(...$ntitleContent);\n  } else {\n    $ntitle.append($ntitleContent || '新版本');\n  }\n  const diffTitle = $('<tr class=\"diff-title\" />').append($otitle, $ntitle);\n  const diffMarker = '<colgroup><col class=\"diff-marker\"><col class=\"diff-content\"><col class=\"diff-marker\"><col class=\"diff-content\"></colgroup>';\n  return $(`<table class=\"diff diff-contentalign-left\" data-mw=\"interface\" />`).append(\n    diffResult && diffMarker,\n    $('<tbody />').append(\n      showTitle ? diffTitle : '',\n      diffResult || '<tr><td colspan=\"2\" class=\"diff-notice\"><div class=\"mw-diff-empty\">（没有差异）</div></td></tr>',\n    ),\n  );\n}\n\n/**\n * 比较差异\n * @param fromtext 旧版本\n * @param totext 新版本\n * @param showTitle 是否显示标题（旧版本、新版本）\n * @returns 新旧版本差异\n */\nconst compare = async (fromtext: string, totext: string, showTitle = false) => {\n  const api = new mw.Api();\n  const res = await api.post({\n    action: 'compare',\n    fromtext,\n    totext,\n    topst: true,\n    fromtitle: 'PAGENAME',\n  }) as ApiCompareResponse;\n  return formatDiff(res.compare['*'], showTitle);\n};\n\nexport default compare;\n","/**\n * 将字符串分割并过滤空行\n * @param content 要分割的字符串\n * @returns 页面列表\n */\nconst splitList = (content: string): string[] => content.split('\\n').filter((s) => s && s.trim());\n\nexport { splitList };\n","\n      import API from \"!../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/.pnpm/style-loader@3.3.4_webpack@5.101.0/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/.pnpm/css-loader@6.11.0_@rspack+core@1.4.11_webpack@5.101.0/node_modules/css-loader/dist/cjs.js!builtin:lightningcss-loader??clonedRuleSet-2.use[0]!../../../node_modules/.pnpm/less-loader@11.1.4_less@4.4.0_webpack@5.101.0/node_modules/less-loader/dist/cjs.js!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/.pnpm/css-loader@6.11.0_@rspack+core@1.4.11_webpack@5.101.0/node_modules/css-loader/dist/cjs.js!builtin:lightningcss-loader??clonedRuleSet-2.use[0]!../../../node_modules/.pnpm/less-loader@11.1.4_less@4.4.0_webpack@5.101.0/node_modules/less-loader/dist/cjs.js!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import Loger from '@/components/Loger';\nimport { categoryMembers, pageSource, compare } from '@/utils/api';\nimport { splitList } from '@/utils/string';\nimport './index.less';\n\n$(() => (async () => {\n  if (mw.config.get('wgPageName') !== 'Special:MassEdit') {\n    await mw.loader.using('mediawiki.util');\n    mw.util.addPortletLink('p-tb', '/Special:MassEdit', '批量编辑', 't-massedit');\n    return;\n  }\n  await mw.loader.using(['mediawiki.api', 'oojs-ui']);\n  const api = new mw.Api();\n\n  /** 当前状态，等待中、获取源代码中、编辑中 */\n  let action: ('waiting' | 'getting' | 'editing') = 'waiting';\n\n  /** 是否被终止 */\n  let stopped = false;\n\n  /** 定时器id */\n  let timeout: NodeJS.Timeout;\n\n  const loger = new Loger([\n    {\n      name: 'success',\n      icon: '✓',\n      color: '#333',\n      text: '已完成',\n    },\n    {\n      name: 'nochange',\n      icon: '○',\n      color: '#888',\n      text: '无变化',\n    },\n    {\n      name: 'warn',\n      icon: '!',\n      color: '#f28500',\n      text: '警告',\n    },\n    {\n      name: 'error',\n      icon: '✕',\n      color: '#eb3941',\n      text: '出错',\n    },\n  ], 'massedit-log', 'h5');\n  mw.loader.load('/index.php?title=User:Nzh21/js/QuickDiff.js&action=raw&ctype=text/javascript');\n  mw.loader.load(`${mw.config.get('wgScriptPath')}/load.php?modules=mediawiki.diff.styles&only=styles`, 'text/css');\n\n  /**\n   * 在Special:MassEdit构建页面\n   */\n  mw.config.set('wgCanonicalSpecialPageName', 'MassEdit');\n  document.title = '批量编辑 - 萌娘百科_万物皆可萌的百科全书';\n  $('.mw-invalidspecialpage').removeClass('mw-invalidspecialpage');\n  $('#firstHeading').html('批量编辑页面<div>By <a href=\"/User:BearBin\">BearBin</a></div>');\n  $('#contentSub').remove();\n\n  /** “原文字”输入框 */\n  const $editFromBox = $('<textarea class=\"me-textarea\" name=\"me-edit-from\" rows=\"4\"/>') as JQuery<HTMLTextAreaElement>;\n  /** “替换为”输入框 */\n  const $changeToBox = $('<textarea class=\"me-textarea\" name=\"me-change-to\" rows=\"4\"/>') as JQuery<HTMLTextAreaElement>;\n  /** 页面列表 */\n  const $pageListBox = $('<textarea class=\"me-textarea\" name=\"me-page-list\" rows=\"12\"/>') as JQuery<HTMLTextAreaElement>;\n  /** 分类列表 */\n  const $categoryListBox = $('<textarea class=\"me-textarea\" name=\"me-category-list\" rows=\"12\"/>') as JQuery<HTMLTextAreaElement>;\n\n  const regexSelect = new OO.ui.CheckboxInputWidget({\n    id: 'me-regex-box',\n  });\n  const regexField = new OO.ui.FieldLayout(regexSelect, {\n    label: '使用正则表达式',\n    align: 'inline',\n  });\n  const regexHelp = new OO.ui.ButtonWidget({\n    label: '常用正则',\n    icon: 'help',\n  });\n  const submitButton = new OO.ui.ButtonWidget({\n    label: '提交',\n    flags: [\n      'primary',\n      'progressive',\n    ],\n    icon: 'check',\n  });\n  const stopButton = new OO.ui.ButtonWidget({\n    label: '终止',\n    flags: [\n      'primary',\n      'destructive',\n    ],\n    icon: 'close',\n  });\n\n  const intervalBox = new OO.ui.TextInputWidget({\n    type: 'number',\n    placeholder: '编辑间隔',\n    id: 'me-interval',\n  });\n\n  const summaryBox = new OO.ui.TextInputWidget({\n    placeholder: '附加摘要',\n    id: 'me-summary',\n  });\n\n  const previewButton = new OO.ui.ButtonWidget({\n    label: '预览',\n    icon: 'search',\n    disabled: true,\n  });\n  const previewTitleBox = new OO.ui.TextInputWidget({\n    placeholder: '要应用本编辑的页面',\n  }).on('change', (value) => {\n    if (value?.length) {\n      previewButton.setDisabled(false);\n    } else {\n      previewButton.setDisabled(true);\n    }\n  });\n\n  /** 重试次数 */\n  const retryTimesBox = new OO.ui.TextInputWidget({\n    type: 'number',\n    placeholder: '0',\n    id: 'me-retry-times',\n    disabled: true,\n  });\n  /** 是否重试 */\n  const retrySelect = new OO.ui.CheckboxInputWidget();\n  const retryField = new OO.ui.FieldLayout(retrySelect.on('change', () => {\n    retryTimesBox.setDisabled(!retrySelect.isSelected()); // 点击时切换重试次数输入框的可用性\n  }), {\n    label: '因网络问题出错时，重试至多',\n    align: 'inline',\n    id: 'me-use-retry',\n  });\n\n  $('#mw-content-text').empty().append(\n    '<h5>原文字：</h5>',\n    $editFromBox,\n    '<h5>替换为：</h5>',\n    $changeToBox,\n    $('<div id=\"me-regex\"/>').append(\n      regexField.$element,\n      regexHelp.$element,\n    ),\n    $('<ul/>').append(\n      '<li>正则表达式须使用斜线包裹（如<code>/regex/g</code>），且<code>g</code>为必须，否则无法被js解析。</li>',\n      '<li>替换后文本若有换行请直接敲回车，不要用<code>\\\\n</code>。</li>',\n    ),\n    $('<div id=\"me-page-lists\"/>').append(\n      $('<div/>').append(\n        '<h5>页面</h5>',\n        $pageListBox,\n      ),\n      $('<div/>').append(\n        '<h5>分类</h5>',\n        $categoryListBox,\n      ),\n    ),\n    $('<div id=\"me-pages-note\"/>').append(\n      '输入要编辑的页面或分类，',\n      '<u>每行一个</u>',\n      '；分类栏请带上 分类/Category/Cat 等能被系统识别的分类名字空间前缀。',\n    ),\n    $('<div id=\"me-edit-panel\" class=\"me-panel\"/>').append(\n      submitButton.$element,\n      stopButton.$element.hide(), // 默认隐藏停止按钮、显示提交按钮\n      intervalBox.$element,\n      summaryBox.$element,\n    ),\n    $('<div id=\"me-preview-panel\" class=\"me-panel\"/>').append(\n      previewButton.$element,\n      previewTitleBox.$element,\n    ),\n    $('<div id=\"me-retry\"/>').append(\n      retryField.$element,\n      retryTimesBox.$element,\n      '次',\n    ),\n    $('<ul/>').append(\n      '<li>编辑间隔单位为秒（s），不填默认为20s。不包含本身编辑页面所用的时间。</li>',\n      $('<li/>').append(\n        '<b>请注意<a target=\"_blank\" href=\"/萌娘百科:机器用户\">机器用户方针</a>所规定速率</b>',\n        '和',\n        '<a target=\"_blank\" href=\"/api.php?action=query&meta=userinfo&uiprop=ratelimits\">ratelimit限制</a>',\n        '并自行设置间隔，或申请机器用户权限。',\n      ),\n    ),\n    loger.element,\n    $('<ul/>').append(\n      '<li>报错“http”不一定是编辑失败，可能实际已提交但等待成功信息过久而判定超时。</li>',\n    ),\n  );\n\n  /**\n   * 实现sleep效果，使用时需要加上await\n   *\n   * @param {number} time 等待时间（ms）\n   * @returns {Promise<void>}\n   */\n  const waitInterval = (time: number): Promise<void> => {\n    return new Promise((resolve) => timeout = setTimeout(resolve, time));\n  };\n\n  /** 设置页面不可交互 */\n  const setActionDisabled = () => {\n    submitButton.setDisabled(true).$element.hide();\n    stopButton.setDisabled(false).$element.show();\n    $('#mw-content-text input, #mw-content-text textarea').prop('disabled', true);\n    window.onbeforeunload = () => true;\n  };\n\n  /** 设置页面可交互 */\n  const setActionEnable = () => {\n    action = 'waiting';\n    clearTimeout(timeout);\n    stopButton.setDisabled(true).$element.hide();\n    submitButton.setDisabled(false).$element.show();\n    $('#mw-content-text input, #mw-content-text textarea').prop('disabled', false);\n    window.onbeforeunload = () => null;\n  };\n\n  /**\n   * 获取分类列表内的页面\n   *\n   * @param categories 分类列表\n   * @returns 分类内的页面\n   */\n  const getPagesFromCats = async (categories: string[]): Promise<string[]> => {\n    const pageList: string[] = [];\n    const promises = categories.map(async (category) => {\n      // 有api权限的用户通过API获取，无权限用户通过ajax获取\n      try {\n        const members = await categoryMembers(category);\n        if (members.length > 0) {\n          loger.record(`获取到【<a href=\"/${category}\" target=\"_blank\">${category}</a>】内的页面${members.length}个。`, 'normal');\n          pageList.push(...members);\n        } else {\n          loger.record(`【${category}】内没有页面。`, 'warn');\n        }\n      } catch (error) {\n        let message = '';\n        switch (error) {\n          case 'http':\n            message = '网络连接出错';\n            break;\n          default:\n            message = error as string;\n        }\n        loger.record(`获取【${category}】内的页面出错：${message}。`, 'error');\n      }\n    });\n    await Promise.all(promises);\n    return pageList;\n  };\n\n  /**\n   * 根据用户输入获取最终要编辑的页面列表\n   *\n   * @returns 得到的页面列表\n   */\n  const getPageList = async (): Promise<string[]> => {\n    const pageSet = new Set([\n      ...splitList($pageListBox.val() || ''),\n      ...await getPagesFromCats(splitList($categoryListBox.val() || '')),\n    ]);\n    return [...pageSet];\n  };\n\n  /**\n   * 按照选择情况解析正则表达式或输出原字符串\n   * @param editFrom 输入的正则表达式或字符串\n   * @param isRegex 是否勾选解析\n   * @returns\n   */\n  const solveRegex = (editFrom: string, isRegex: boolean): string | RegExp | undefined => {\n    let output: string | RegExp = editFrom;\n    if (isRegex) {\n      try {\n        const parts = editFrom.match(/^\\/(.*)\\/([gimsuy]*)$/);\n        if (!parts) {\n          loger.record('正则表达式格式有误。', 'warn');\n          return '';\n        }\n        const [_, pattern, flags] = parts;\n        if (!flags.includes('g')) {\n          loger.record('正则表达式必须包含全局匹配(g)修饰符。', 'warn');\n          return '';\n        }\n        output = new RegExp(pattern, flags);\n      } catch (err) {\n        loger.record(`正则表达式解析失败：${err}`, 'error');\n        return;\n      }\n    }\n    return output;\n  };\n\n  /**\n   * 预览差异\n   * @param title 页面标题\n   * @param editFrom\n   * @param changeTo\n   * @returns\n   */\n  const preview = async (title: string, editFrom: string | RegExp, changeTo?: string): Promise<string | undefined> => {\n    previewButton.setDisabled(true);\n    loger.record('正在获取预览……');\n    try {\n      const fromtext = await pageSource(title);\n      if (!fromtext) {\n        loger.record(`获取${title}当前内容出错。`, 'error');\n        return;\n      }\n      const totext = fromtext.replaceAll(editFrom, changeTo!);\n      const diff = await compare(fromtext, totext, true);\n      OO.ui.alert($(diff), {\n        title: $(`<span>预览<b>【${title}】</b>的更改</span>`),\n        size: 'larger',\n      });\n    } catch (err) {\n      loger.record(`预览出错：${err}。`, 'error');\n    }\n    previewButton.setDisabled(false);\n  };\n\n  /**\n   * 根据替换规则对指定页面进行编辑\n   *\n   * @param title 页面标题\n   * @param summary 编辑摘要\n   * @param editFrom 原文字\n   * @param changeTo 替换为\n   * @returns 编辑结果，success/nochange/failed\n   */\n  const editAction = async (title: string, summary: string, editFrom: string | RegExp, changeTo: string): Promise<'nochange' | 'success' | 'failed'> => {\n    const retry = retrySelect.isSelected();\n    let retreyTimes = 0;\n    const maxRetryCount = +retryTimesBox.getValue();\n    const pageLink = `<a href=\"/${title}\" target=\"_blank\">${title}</a>`;\n    do {\n      try {\n        action = 'getting';\n        const source = await pageSource(title); // 获取源代码并进行替换\n        const replacedSource = source!.replaceAll(editFrom, changeTo);\n        if (source === replacedSource) {\n          loger.record(`【${pageLink}】编辑前后无变化。`, 'nochange');\n          return 'nochange';\n        }\n        if (stopped) {\n          return 'failed';\n        }\n        action = 'editing';\n        const editResult = await api.postWithToken('csrf', {\n          format: 'json',\n          action: 'edit',\n          watchlist: 'nochange',\n          tags: 'Bot',\n          bot: true,\n          minor: true,\n          nocreate: true,\n          title,\n          text: replacedSource,\n          summary: `[[U:BearBin/js#MassEdit|MassEdit]]：【${editFrom.toString().replace(/\\n/g, '↵')}】→【${changeTo.replace(/\\n/g, '↵')}】${summary && `：${summary}`}`,\n        });\n        action = 'waiting';\n        if (editResult?.edit?.result === 'Success') {\n          loger.record(`【<a href=\"/_?diff=${editResult.edit.newrevid}\" target=\"_blank\">${title}</a>】编辑完成。`, 'success');\n          return 'success';\n        } else if (editResult?.edit?.abusefilter) {\n          loger.record(`【${pageLink}】编辑失败：被滥用过滤器${editResult.edit.abusefilter.id}阻止。过滤器描述：${editResult.edit.abusefilter.description}。`, 'error');\n          return 'failed';\n        }\n        loger.record(`【${pageLink}】编辑失败，请将以下内容告知<a href=\"/User_talk:BearBin\" target=\"_blank\">BearBin</a>：${JSON.stringify(editResult)}`, 'error');\n        return 'failed';\n      } catch (err) {\n        let errorMessage = '';\n        switch (err) {\n          case 'missingtitle':\n            errorMessage = '页面不存在';\n            break;\n          case 'http':\n            retreyTimes++;\n            errorMessage = retry && retreyTimes <= maxRetryCount ? `网络连接出错，正在重试（${retreyTimes}/${maxRetryCount}）` : '网络连接出错';\n            break;\n          case 'protectedpage':\n            errorMessage = '页面被保护';\n            break;\n          default:\n            errorMessage = err as string;\n        }\n        loger.record(`编辑【<a href=\"/${title}?action=history\" target=\"_blank\">${title}</a>】时出现错误：${errorMessage}。`, 'error');\n        if (!retry || err !== 'http') {\n          return 'failed';\n        }\n      }\n    } while (retreyTimes <= maxRetryCount);\n    return 'failed';\n  };\n\n  // 点击提交按钮\n  submitButton.on('click', async () => {\n    // 检查输入\n    if (!$editFromBox.val()) {\n      loger.record('请输入要替换的原文字。', 'warn');\n      return;\n    } else if (!$pageListBox.val() && !$categoryListBox.val()) {\n      loger.record('请输入要编辑的页面或分类。', 'warn');\n      return;\n    }\n    const confirmText = $('<p>请确认您的编辑内容。若因输入不当而产生错误，请自行<ruby>承担后果<rp>(</rp><rt>料理后事</rt><rp>)</rp></ruby>。</p>');\n    const confirm = await OO.ui.confirm(confirmText, {\n      title: '提醒',\n      size: 'small',\n    });\n    if (confirm) {\n      const additionalSummary = summaryBox.getValue();\n      const interval = +(intervalBox.getValue() === '' ? 20 : intervalBox.getValue()) * 1000;\n      const editFrom = solveRegex($editFromBox.val()!, regexSelect.isSelected());\n      const changeTo = $changeToBox.val()!;\n      if (!editFrom) {\n        return;\n      }\n      setActionDisabled();\n      await getPageList().then(async (result) => {\n        let complete = 0;\n        const { length } = result;\n        loger.record(`共${length}个页面，即将开始编辑……`, 'normal');\n        for (const item of result) {\n          const editResult = await editAction(item, additionalSummary, editFrom, changeTo);\n          complete++;\n          if (stopped) {\n            // 被终止\n            break;\n          }\n          if (editResult === 'success' && interval !== 0 && complete < length) {\n            await waitInterval(interval);\n          }\n        }\n        if (stopped) {\n          stopped = false;\n          loger.record('编辑终止。', 'normal');\n        } else {\n          loger.record('编辑完毕。', 'normal');\n        }\n        setActionEnable();\n      });\n      setActionEnable();\n    }\n  });\n\n  /**\n   * 点击终止按钮。\n   *\n   * 终止逻辑：\n   * 1. 若处于等待或读取源代码状态，标记终止以使请求循环在下次请求中打断，同时恢复页面可交互。\n   * 2. 若处于等待编辑请求响应状态，标记终止，等待当前请求完毕后恢复页面可交互。\n   */\n  stopButton.on('click', () => {\n    stopButton.setDisabled(true);\n    switch (action) {\n      case 'waiting':\n        // 等待中，无需过多操作直接恢复交互\n        stopped = false;\n        setActionEnable();\n        loger.record('编辑终止。', 'normal');\n        break;\n      case 'getting':\n        // 正在获取源代码，标记被终止并回复交互\n        stopped = true;\n        setActionEnable();\n        break;\n      case 'editing':\n        // 正在编辑请求中，等待响应\n        stopped = true;\n        break;\n    }\n  });\n\n  // 点击预览按钮\n  previewButton.on('click', () => {\n    const editFrom = $editFromBox.val();\n    if (!editFrom) {\n      loger.record('请输入要替换的原文字。', 'warn');\n      return;\n    }\n    const solvedEditFrom = solveRegex(editFrom, regexSelect.isSelected());\n    if (!solvedEditFrom) {\n      return;\n    }\n    preview(\n      previewTitleBox.getValue(),\n      solvedEditFrom,\n      $changeToBox.val(),\n    );\n  });\n\n  // 正则帮助\n  const regexHelpText = $('<ul id=\"me-regex-help-list\"/>').append(\n    `<li><code>${/\\[\\[(?:Category|Cat|分[类類]):分类名(\\|[^[]*)?\\]\\]/gi.toString()}</code>：匹配分类</li>`,\n    `<li><code>${/\\{\\{(?:Template:|T:|[模样樣]板:)?模板名/gi.toString()}</code>：匹配模板（不含内容）</li>`,\n    `<li><code>${/^.*$/gs.toString()}</code>：匹配全文（感谢鬼影）</li>`,\n  );\n  regexHelp.on('click', () => {\n    OO.ui.alert(regexHelpText, {\n      title: '常用正则表达式',\n      size: 'medium',\n    });\n  });\n})());\n"],"names":["btoa","unescape","encodeURIComponent","JSON","i","document","window","e","Error","Object","html","template","Loger","createElement","logTypes","id","headlineTagName","key","pre","name","icon","color","text","clearButton","logerFilter","type","button","iconElement","countElement","detail","time","Date","record","String","getCategoryMembers","cmtitle","cmtype","api","mw","pageList","group","cmcontinue","undefined","result","title","getCategoryMembersByAjax","link","$ajaxResult","$","selector","members","_","ele","$pageContinueLink","$catContinueLink","pageSource","params","pageData","res","compare","fromtext","totext","showTitle","formatDiff","diffResult","$otitleContent","$ntitleContent","$otitle","$ntitle","Array","diffTitle","splitList","content","s","timeout","action","stopped","loger","$editFromBox","$changeToBox","$pageListBox","$categoryListBox","regexSelect","OO","regexField","regexHelp","submitButton","stopButton","intervalBox","summaryBox","previewButton","previewTitleBox","value","retryTimesBox","retrySelect","retryField","waitInterval","Promise","resolve","setTimeout","setActionEnable","clearTimeout","getPagesFromCats","categories","promises","category","categoryMembers","error","message","getPageList","Set","solveRegex","editFrom","isRegex","output","parts","pattern","flags","RegExp","err","preview","changeTo","diff","editAction","summary","retry","retreyTimes","maxRetryCount","pageLink","source","replacedSource","editResult","errorMessage","confirmText","additionalSummary","interval","complete","length","item","solvedEditFrom","regexHelpText"],"mappings":"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"}