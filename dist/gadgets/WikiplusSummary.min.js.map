{"version":3,"file":"WikiplusSummary.min.js","sources":["webpack://bearbin-moegirlpedia/webpack/runtime/rspack_version","webpack://bearbin-moegirlpedia/webpack/runtime/rspack_unique_id","webpack://bearbin-moegirlpedia/./src/gadgets/WikiplusSummary/index.ts"],"sourcesContent":["__webpack_require__.rv = () => (\"1.4.2\")","__webpack_require__.ruid = \"bundler=rspack@1.4.2\";\n","interface SummaryDetail {\n  name: string;\n  detail: string;\n}\n\n$(document.body).on('click', '#Wikiplus-Edit-TopBtn, .Wikiplus-Edit-SectionBtn, .Wikiplus-Edit-EveryWhereBtn', () => {\n  const si = setInterval;\n  const WPSummary: (string | SummaryDetail)[] = (window as any).WPSummary || [\n    '修饰语句',\n    '修正笔误',\n    '内容扩充',\n    '排版',\n    '内部链接',\n    '分类',\n    '消歧义',\n    '萌百化',\n  ];\n  const itv = si(() => {\n    if (!document.getElementById('Wikiplus-Quickedit-Summary-Input')) {\n      return;\n    }\n    clearInterval(itv);\n    const $WSList = $('<div id=\"ws-buttons\" style=\"margin-top:0.2em;font-size:0.875em\"></div>');\n    const $WSButtons = WPSummary.reduce((acc, val, index, { length }) => {\n      let $button: JQuery<HTMLElement>;\n      let summaryDetail: string;\n      if (typeof val === 'string') {\n        $button = $(`<a>${val}</a>`);\n        summaryDetail = val;\n      } else if (typeof val === 'object') {\n        $button = $(`<a>${val.name}</a>`);\n        summaryDetail = val.detail;\n      } else {\n        return acc;\n      }\n      $button.on('click', () => {\n        const $summary = $('#Wikiplus-Quickedit-Summary-Input') as JQuery<HTMLInputElement>;\n        const summary = $summary.val() as string;\n        $summary.val(summary.replace(/(\\/\\*.+\\*\\/ ?)?(.+)/, `$1${summaryDetail} $2`)).trigger('focus');\n      });\n      acc.push($button); // 逐一插入按钮\n      if (index < length - 1) {\n        acc.push($('<span> | </span>')); // 除最后一个外，插入分割线\n      }\n      return acc;\n    }, [] as JQuery<HTMLElement>[]);\n\n    $WSList.append(\n      $('<span>摘要：</span>'),\n      $WSButtons,\n      '<br/>',\n    );\n    $('#Wikiplus-Quickedit-Summary-Input+br').replaceWith($WSList);\n    $('.Wikiplus-InterBox').css('top', +$('.Wikiplus-InterBox').css('top').replace('px', '') - 50); // 将w+窗口上移以免挡住快速摘要和提交编辑按钮\n  }, 500);\n});\n"],"names":["$","document","si","setInterval","WPSummary","window","itv","clearInterval","$WSList","$WSButtons","acc","val","index","$button","summaryDetail","length","$summary","summary"],"mappings":"yIAAA,EAAoB,EAAE,CAAG,IAAO,QCAhC,EAAoB,IAAI,CAAG,uBCK3BA,EAAEC,SAAS,IAAI,EAAE,EAAE,CAAC,QAAS,iFAAkF,KAC7G,IAAMC,EAAKC,YACLC,EAAyCC,OAAe,SAAS,EAAI,CACzE,OACA,OACA,OACA,KACA,OACA,KACA,MACA,MACD,CACKC,EAAMJ,EAAG,KACb,GAAI,CAACD,SAAS,cAAc,CAAC,oCAC3B,OAEFM,cAAcD,GACd,IAAME,EAAUR,EAAE,0EACZS,EAAaL,EAAU,MAAM,CAAC,CAACM,EAAKC,EAAKC,EAAO,K,IAChDC,EACAC,EAFgD,CAAEC,OAAAA,CAAM,CAAE,GAG9D,GAAI,AAAe,UAAf,OAAOJ,EACTE,EAAUb,EAAE,CAAC,GAAG,EAAEW,EAAI,IAAI,CAAC,EAC3BG,EAAgBH,OACX,GAAI,AAAe,UAAf,OAAOA,EAIhB,OAAOD,EAHPG,EAAUb,EAAE,CAAC,GAAG,EAAEW,EAAI,IAAI,CAAC,IAAI,CAAC,EAChCG,EAAgBH,EAAI,MAAM,CAa5B,OATAE,EAAQ,EAAE,CAAC,QAAS,KAClB,IAAMG,EAAWhB,EAAE,qCACbiB,EAAUD,EAAS,GAAG,GAC5BA,EAAS,GAAG,CAACC,EAAQ,OAAO,CAAC,sBAAuB,CAAC,EAAE,EAAEH,EAAc,GAAG,CAAC,GAAG,OAAO,CAAC,QACxF,GACAJ,EAAI,IAAI,CAACG,GACLD,EAAQG,EAAS,GACnBL,EAAI,IAAI,CAACV,EAAE,qBAENU,CACT,EAAG,EAAE,EAELF,EAAQ,MAAM,CACZR,EAAE,oBACFS,EACA,SAEFT,EAAE,wCAAwC,WAAW,CAACQ,GACtDR,EAAE,sBAAsB,GAAG,CAAC,MAAO,AAACA,EAAE,sBAAsB,GAAG,CAAC,OAAO,OAAO,CAAC,KAAM,IAAM,GAC7F,EAAG,IACL,E"}