(()=>{"use strict";var t={922:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(n)for(var l=0;l<this.length;l++){var c=this[l][0];null!=c&&(a[c]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);n&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),e.push(u))}},e}},499:t=>{t.exports=function(t){return t[1]}},536:(t,e,r)=>{r.d(e,{Z:()=>l});var n=r(499),o=r.n(n),i=r(922),a=r.n(i)()(o());a.push([t.id,".bearbintools-loger .loger-clear{font-size:.9em;font-weight:400;margin-left:.3em}.bearbintools-loger .loger-body{background:hsla(0,0%,100%,.7);border:1px solid #ccc;display:flow-root;padding:.3em}.bearbintools-loger .loger-filter{float:right;padding:.4em}.bearbintools-loger .loger-filter>div{border-radius:.3em;cursor:pointer;margin-bottom:.2em;padding-right:.2em}.bearbintools-loger .loger-filter>div.loger-filter-selected{background-color:hsla(0,0%,50%,.07)}.bearbintools-loger .loger-filter .loger-filter-icon{display:inline-block;height:1em;line-height:1em;text-align:center;width:1.2em}.bearbintools-loger .loger-lines{font-family:monospace;list-style:inside;max-height:20em;overflow-y:auto}.bearbintools-loger .loger-lines>li a{color:inherit;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}",""]);const l=a},572:(t,e,r)=>{r.d(e,{Z:()=>l});var n=r(499),o=r.n(n),i=r(922),a=r.n(i)()(o());a.push([t.id,".rootpage-Special_BulkMove #firstHeading{align-items:flex-end;display:flex;flex-wrap:wrap;justify-content:space-between}.rootpage-Special_BulkMove #firstHeading>div{font-size:.6em}.rootpage-Special_BulkMove #bodyContent{padding-right:0!important}.rootpage-Special_BulkMove #bodyContent #mw-content-text h3{margin-bottom:0}.rootpage-Special_BulkMove #bodyContent #mw-content-text ul.bearbintools-notelist{margin:.4em 0 0 1.6em}#bm-page-list-table{border-collapse:collapse;max-width:900px;width:100%}#bm-page-list-table tbody{counter-reset:row-counter}#bm-page-list-table tbody tr{counter-increment:row-counter}#bm-page-list-table tbody tr:before{content:counter(row-counter);display:table-cell;padding-right:.3em;text-align:center;vertical-align:middle;width:0}#bm-page-list-table tbody tr td{background-color:hsla(0,0%,100%,.7);border:1px solid #aaa;padding:0}#bm-page-list-table tbody tr td:last-child,#bm-page-list-table tbody tr th:last-child{background-color:transparent;background-position:50%;border:none;width:20px}#bm-page-list-table input[type=text]{background:transparent;border:none;border-radius:0;box-sizing:border-box;height:100%;padding:.4em;width:100%}#bm-page-list-table input[type=text]:focus{background-color:hsla(0,0%,50%,.02);outline:none}#bm-page-list-table #bm-add-row,#bm-page-list-table .remove-row{border-radius:50%;cursor:pointer;height:20px;transition:background .2s ease;width:20px}#bm-page-list-table #bm-add-row:hover,#bm-page-list-table .remove-row:hover{background-color:hsla(0,0%,50%,.2)}#bm-option{margin-top:.8em}#bm-option>div{margin-top:.3em}#bm-submit-panel{display:flex;gap:.1rem;margin-top:.8em}#bm-submit-panel #bm-interval{flex:0 0 5.5em}#bm-submit-panel #bm-summary{max-width:none}",""]);const l=a},379:t=>{var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var i={},a=[],l=0;l<t.length;l++){var c=t[l],s=n.base?c[0]+n.base:c[0],u=i[s]||0,d="".concat(s," ").concat(u);i[s]=u+1;var p=r(d),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(f);else{var h=o(f,n);n.byIndex=l,e.splice(l,0,{identifier:d,updater:h,references:1})}a.push(d)}return a}function o(t,e){var r=e.domAPI(e);r.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,o){var i=n(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var l=r(i[a]);e[l].references--}for(var c=n(t,o),s=0;s<i.length;s++){var u=r(i[s]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}i=c}}},569:t=>{var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,r)=>{t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nc=void 0,(()=>{var t=r(379),e=r.n(t),n=r(795),o=r.n(n),i=r(569),a=r.n(i),l=r(565),c=r.n(l),s=r(216),u=r.n(s),d=r(589),p=r.n(d),f=r(536),h={};h.styleTagTransform=p(),h.setAttributes=c(),h.insert=a().bind(null,"head"),h.domAPI=o(),h.insertStyleElement=u();e()(f.Z,h);f.Z&&f.Z.locals&&f.Z.locals;function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w(n.key),n)}}function y(t,e,r){return(e=w(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===m(e)?e:String(e)}var x=function(t){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.children[0]},k=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"h3";for(var i in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"_logTypes",{success:{icon:"✓",color:"#333",text:"完成"},warn:{icon:"!",color:"#f28500",text:"警告"},error:{icon:"✕",color:"#eb3941",text:"出错"}}),y(this,"logDetails",[]),y(this,"filterButtons",{}),r.length>0&&(this._logTypes=r.reduce((function(t,e){var r=e.name,n=e.icon,o=e.color,i=e.text;return t[r]={icon:n,color:o,text:i},t}),{})),this._logTypes)this._logTypes[i].show=!0;this.headline=x("<".concat(o,' class="loger-headline"></').concat(o,">")),this.body=x('<div class="loger-body"></div>'),this.logerLines=x('<ul class="loger-lines"></ul>');var a=x('<a class="loger-clear">[清空]</a>');a.addEventListener("click",(function(){for(var t in e.logDetails.length=0,e.logerLines.innerHTML="",e.filterButtons)e.filterButtons[t].countElement.innerText="0"}));for(var l=x('<nav class="loger-filter"></nav>'),c=function(){var t=b(u[s],2),r=t[0],n=t[1],o=n.icon,i=n.color,a=n.text,c=x('<div class="loger-filter-selected loger-'.concat(r,'" style="color: ').concat(i,'"></div>')),d=x('<span class="loger-filter-icon">'.concat(o,"</span>")),p=x('<span class="loger-filter-count">0</span>');c.append(d,p," ".concat(a)),c.addEventListener("click",(function(){e._logTypes[r].show?(c.classList.remove("loger-filter-selected"),e.logerLines.classList.add("loger-".concat(r,"-hidden")),e.logDetails.filter((function(t){return t.type===r})).forEach((function(t){t.node.style.display="none"})),e._logTypes[r].show=!1):(c.classList.add("loger-filter-selected"),e.logerLines.classList.remove("loger-".concat(r,"-hidden")),e.logDetails.filter((function(t){return t.type===r})).forEach((function(t){t.node.style.display=""})),e._logTypes[r].show=!0)})),e.filterButtons[r]={button:c,countElement:p},l.appendChild(c)},s=0,u=Object.entries(this._logTypes);s<u.length;s++)c();this.element=x('<div class="bearbintools-loger" id="'.concat(n||"",'"></div>')),this.headline.append("日志",a),this.body.append(l,this.logerLines),this.element.append(this.headline,this.body)}var e,r,n;return e=t,r=[{key:"record",value:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(new Date).toLocaleTimeString(),i=document.createElement("li");i.classList.add("loger-record","loger-".concat(n)),i.innerHTML="".concat(o," - ").concat(t),i.style.color=(null===(e=this._logTypes[n])||void 0===e?void 0:e.color)||"#222",!1===(null===(r=this._logTypes[n])||void 0===r?void 0:r.show)&&(i.style.display="none"),this.logerLines.appendChild(i),this.logerLines.scrollTop=this.logerLines.scrollHeight,this.logDetails.push({node:i,type:n}),this.filterButtons[n]&&(this.filterButtons[n].countElement.innerText=+this.filterButtons[n].countElement.innerText+1)}}],r&&v(e.prototype,r),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),L=r(572),O={};O.styleTagTransform=p(),O.setAttributes=c(),O.insert=a().bind(null,"head"),O.domAPI=o(),O.insertStyleElement=u();e()(L.Z,O);L.Z&&L.Z.locals&&L.Z.locals;function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function S(){S=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),l=new C(n||[]);return o(a,"_invoke",{value:$(t,r,l)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var p="suspendedStart",f="suspendedYield",h="executing",m="completed",b={};function g(){}function v(){}function y(){}var w={};s(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(P([])));k&&k!==r&&n.call(k,a)&&(w=k);var L=y.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,a,l){var c=d(t[o],t,i);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==E(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,a,l)}),(function(t){r("throw",t,a,l)})):e.resolve(u).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function $(e,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var c=_(l,n);if(c){if(c===b)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=d(e,r,n);if("normal"===s.type){if(o=n.done?m:f,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function _(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,_(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(E(e)+" is not iterable")}return v.prototype=y,o(L,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:v,configurable:!0}),v.displayName=s(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s(t,c,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},O(T.prototype),s(T.prototype,l,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new T(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(L),s(L,c,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return l.type="throw",l.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function T(t,e,r,n,o,i,a){try{var l=t[i](a),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,o)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){T(i,n,o,a,l,"next",t)}function l(t){T(i,n,o,a,l,"throw",t)}a(void 0)}))}}$((function(){return _(S().mark((function t(){var e,r,n,o,i,a,l,c,s,u,d,p,f;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Special:BulkMove"===mw.config.get("wgPageName")){t.next=5;break}return t.next=3,mw.loader.using(["mediawiki.util"]);case 3:return mw.util.addPortletLink("p-tb","/Special:BulkMove","批量移动","t-bulkmove"),t.abrupt("return");case 5:return t.next=7,mw.loader.using(["mediawiki.api","oojs-ui","mediawiki.user"]);case 7:e=new mw.Api,r=new k,n=0,o=function(t){return new Promise((function(e){return setTimeout(e,t)}))},i=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=0;e<t;e++)n++,$("#bm-page-list-table tbody").append($("<tr>").append($('<td><input type="text" data-row-no="'.concat(n,'" data-col-no="1" name="').concat(n,'-1"></td>'))).append($('<td><input type="text" data-row-no="'.concat(n,'" data-col-no="2" name="').concat(n,'-2"></td>'))).append($('<td><div class="remove-row oo-ui-icon-subtract" title="删除此行"></div></td>')))},mw.config.set("wgCanonicalSpecialPageName","BulkMove"),document.title="批量移动 - 萌娘百科_万物皆可萌的百科全书",$(".mw-invalidspecialpage").removeClass("mw-invalidspecialpage"),$("#firstHeading").html("批量移动页面<div>By BearBin</div>"),$("#contentSub").remove(),$("#mw-content-text").html(["<h3>页面列表</h3>",'<table id="bm-page-list-table">',"<thead>","<tr>","<th></th>","<th>源页面</th>","<th>目标页面</th>",'<th><div class="oo-ui-icon-add" id="bm-add-row" title="新增一行"></div></th>',"</tr>","</thead>","<tbody></tbody>","</table>",'<ul class="bearbintools-notelist">',"<li>请输入要移动的页面列表及目标页面，一一对应。</li>","<li>点击右上角“+”添加一行，长按可连续添加。</li>","<li>可直接从Excel复制（部分浏览器可能不支持）。粘贴时浏览器可能会需要获取权限，请注意是否有提醒。</li>","</ul>",'<div id="bm-option"></div>','<div id="bm-submit-panel"></div>','<ul class="bearbintools-notelist">',"<li>操作间隔单位为秒（s），不填默认为0。不包含本身移动页面所用的服务器响应时间。</li>",'<li>请注意<a target="_blank" href="/萌娘百科:机器用户">机器用户方针</a>所规定的速率和<a target="_blank" href="/api.php?action=query&meta=userinfo&uiprop=ratelimits">ratelimit限制</a>并自行设置间隔，或申请机器用户权限。</li>',"</ul>"].join("")).append($(r.element)),i(10),a=new OO.ui.FieldLayout(new OO.ui.CheckboxInputWidget({id:"bm-movetalk-box",selected:!0}),{label:"移动关联的讨论页",align:"inline",id:"bm-movetalk"}),l=new OO.ui.CheckboxInputWidget({id:"bm-redirect-box"}),c=new OO.ui.FieldLayout(l,{label:"保留重定向",align:"inline",id:"bm-redirect"}),s=new OO.ui.FieldLayout(new OO.ui.CheckboxInputWidget({id:"bm-watchlist-box"}),{label:"监视源页面和目标页面",align:"inline",id:"bm-watchlist"}),$("#bm-option").append(a.$element,c.$element,s.$element),u=new OO.ui.ButtonWidget({label:"提交",flags:["primary","progressive"],icon:"check",id:"bm-submit"}),d=new OO.ui.TextInputWidget({placeholder:"操作间隔",id:"bm-interval"}),p=new OO.ui.TextInputWidget({placeholder:"附加摘要",id:"bm-reason",name:"wpReason"}),$("#bm-submit-panel").append(u.$element,d.$element,p.$element),mw.user.getRights().done((function(t){t.includes("suppressredirect")||l.setSelected(!0).setDisabled(!0)})),$("#bm-add-row").on("mousedown",(function(){f=setInterval((function(){i()}),200)})).on("mouseup",(function(){clearInterval(f),i()})),$("#bm-page-list-table").on("click",".remove-row",(function(){n--,$(this).closest("tr").remove(),$("#bm-page-list-table tbody tr").each((function(t,e){$(e).find("input").attr("data-row-no",t+1)}))})),$("#bm-page-list-table").on("paste",'input[type="text"]',(function(t){var e=this;navigator.clipboard.readText().then((function(r){if(r.indexOf("\t")>-1||r.indexOf("\n")>-1&&r.indexOf("\n")!==r.length-1){t.preventDefault();for(var n=r.split("\n"),o=$("#bm-page-list-table input[data-row-no][data-col-no]"),i=0;i<n.length;i++)for(var a=n[i].split("\t"),l=0;l<2;l++){var c;if((null===(c=a[l])||void 0===c?void 0:c.trim().length)>0){var s=i+Number($(e).attr("data-row-no")),u=l+Number($(e).attr("data-col-no"));o.filter('[data-row-no="'.concat(s,'"][data-col-no="').concat(u,'"]')).val(a[l])}}}}))})),$("#bearbintools-log-state>div").each((function(t,e){var r=!0,n=$(e);n.on("click",(function(t){t.preventDefault(),r?($("#bearbintools-log-lines").addClass("".concat(n.attr("id"),"-hide")),n.removeClass("log-selected"),r=!1):($("#bearbintools-log-lines").removeClass("".concat(n.attr("id"),"-hide")),n.addClass("log-selected"),r=!0)}))})),u.on("click",_(S().mark((function t(){var n,i,a,l,c,s,f,h,m,b,g,v,y,w;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=$("<p>请确认您的移动是否有误。若因输入不当而产生错误，请自行<ruby><rb>承担后果</rb><rp>(</rp><rt>料理后事</rt><rp>)</rp></ruby>。</p>"),t.next=3,OO.ui.confirm(n,{title:"提醒",size:"small"});case 3:if(!t.sent){t.next=52;break}u.setDisabled(!0),window.onbeforeunload=function(){return!0},$("#mw-content-text input, #mw-content-text textarea").prop("disabled",!0),i=$("#bm-movetalk-box input").prop("checked"),a=!$("#bm-redirect-box input").prop("checked"),l=$("#bm-watchlist-box input").prop("checked")?"watch":"unwatch",c=p.getValue().length>0?"[[User:BearBin/js#批量移动页面|BulkMove]]：".concat(p.getValue()):"[[User:BearBin/js#批量移动页面|BulkMove]]",s=1e3*Number(d.getValue()),f=mw.config.get("wgUserGroups").includes("bot")?"bot":"Automation tool",h=[],$("#bm-page-list-table tbody tr").each((function(t,e){var r=$(e).find("input")[0].value,n=$(e).find("input")[1].value;(null==r?void 0:r.length)>0&&(null==n?void 0:n.length)>0&&h.push({from:r,to:n})})),h.length>0?r.record("共".concat(h.length,"个页面，即将开始移动。")):r.record("没有要移动的页面。"),m=0,b=h;case 18:if(!(m<b.length)){t.next=48;break}return g=b[m],v=g.from,y=g.to,t.prev=21,t.next=24,e.postWithToken("csrf",{format:"json",action:"move",from:v,to:y,movetalk:i,noredirect:a,watchlist:l,reason:c,tags:f,bot:!0});case 24:if(!t.sent.move){t.next=29;break}return r.record('移动【<a href="/'.concat(v).concat(a?"":"?redirect=no",'" class="').concat(a?"":"mw-redirect",'">').concat(v,'</a>】→【<a href="/').concat(y,'">').concat(y,"</a>】成功。"),"success"),t.next=29,o(s);case 29:t.next=45;break;case 31:t.prev=31,t.t0=t.catch(21),w="",t.t1=t.t0,t.next="missingtitle"===t.t1?37:"articleexists"===t.t1?39:"http"===t.t1?41:43;break;case 37:return w="源页面不存在",t.abrupt("break",44);case 39:return w="目标页面已存在",t.abrupt("break",44);case 41:return w="网络连接出错",t.abrupt("break",44);case 43:w=t.t0;case 44:r.record('移动【<a href="/'.concat(v,'">').concat(v,'</a>】→【<a href="/').concat(y,'">').concat(y,"</a>】失败：").concat(w,"。"),"error");case 45:m++,t.next=18;break;case 48:r.record("移动完毕。"),u.setDisabled(!1),window.onbeforeunload=function(){return null},$("#mw-content-text input, #mw-content-text textarea").prop("disabled",!1);case 52:case"end":return t.stop()}}),t,null,[[21,31]])}))));case 34:case"end":return t.stop()}}),t)})))()}))})()})();