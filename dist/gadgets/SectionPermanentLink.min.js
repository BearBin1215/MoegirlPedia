(()=>{if(mw.config.get("wgNamespaceNumber")%2==1){const e=wgULS("固定链接","固定連結");$("#mw-content-text .mw-parser-output h2").each(((t,n)=>{const i=$(n),s=$('<span class="mw-editsection-divider"> | </span>'),a=$(`<a>${e}</a>`);if(document.getElementsByClassName("mw-editsection")[0]){$(n).find(".mw-editsection-bracket").first().after(s).after(a);const e=i.find(".AnnTools_MarkAsResolved");if(e[0]){const t=e.next(".mw-editsection-divider");t.length>0&&t.after(s).after(a)}}else i.find(".mw-headline").after($('<span class="mw-editsection"></span>').append('<span class="mw-editsection-bracket">[</span>',a,'<span class="mw-editsection-bracket">]</span>'));a.on("click",(()=>{navigator.clipboard.writeText(`[[Special:PermanentLink/${mw.config.get("wgRevisionId")}#${i.find(".mw-headline").attr("id")}]]`),a.text(wgULS("复制成功","復製成功")),setTimeout((()=>{a.text(e)}),2e3)}))}))}})();