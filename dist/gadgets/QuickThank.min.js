-1===mw.config.get("wgNamespaceNumber")&&mw.config.get("wgTitle").replace(/.*\//g,"")!==mw.config.get("wgUserName")&&mw.loader.using(["mediawiki.api","oojs-ui"]).then((()=>{$(".mw-changeslist-line-inner, .mw-enhanced-rc-nested").each(((e,t)=>{const i=$(t),n=i.closest("[data-mw-revid]").attr("data-mw-revid");if(!n||i.find("bdi").text()===mw.config.get("wgUserName"))return;const a=$('<a class="quick-thank">[感谢]</a>');a.on("click",(async e=>{e.preventDefault(),await OO.ui.confirm("确定要感谢吗？",{title:"确认",size:"small"})&&(a.html('[感谢<span style="display:inline-block;animation:rotate 2s linear infinite;">↻</span>]'),(new mw.Api).postWithToken("csrf",{format:"json",action:"thank",source:"diff",rev:n}).done((()=>{a.text("[感谢成功]"),setTimeout((()=>{a.remove()}),3e3)})).fail((e=>{a.text("[感谢失败：".concat(e,"]")),setTimeout((()=>{a.text("[感谢]")}),3e3)})))})),i.append(a)}))}));